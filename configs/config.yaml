data:
  models-root: /media/mpascual/PortableSSD/Meningiomas/tasks/superresolution/results/models
  hr-root: /media/mpascual/PortableSSD/Meningiomas/tasks/superresolution/high_resolution
  lr-root: /media/mpascual/PortableSSD/Meningiomas/tasks/superresolution/low_res
  spacings: [3mm, 5mm, 7mm]
  pulses: [t1c, t1n, t2w, t2f]
  models: [BSPLINE, ECLARE, SMORE, UNIRES]
  kfolds: 5
  seed: 42
  out: /media/mpascual/PortableSSD/Meningiomas/tasks/superresolution/kfolds_manifest.json

registration:
  atlas: /media/mpascual/PortableSSD/Meningiomas/ATLAS/sri24_spm8/templates
  t1: T1_brain.nii
  t2: T2_brain.nii
  epi: EPI_brain.nii
  pd: PD_brain.nii
  # To get the brain mask, just compute the largest connected component of the atlas T1 thresholded at 0.1. 
  brain_mask: brain_mask.nii

pacs_sr:
  # Experiment identity
  experiment_name: "PaCS-SR_first_draft"
  # Tile geometry
  patch_size: 16        # p in {8,16,24,32}
  stride: 16            # use patch_size for non-overlap, or patch_size//2 for 50% overlap
  # Optimization
  simplex: true         # enforce w >= 0 and sum(w)=1
  lambda_ridge: 1.0e-6  # small ridge to condition the Q matrix per region
  laplacian_tau: 0.0    # optional smoothing of regional weights across adjacency graph
  # Edge-aware voxel reweighting for statistics accumulation
  lambda_edge: 0.0      # 0 disables edge emphasis
  edge_power: 2.0
  # Normalization
  normalize: "zscore"   # ['zscore'] for now
  # Registration
  use_registration: true  # enable atlas-based registration and brain masking
  # I/O and compute
  num_workers: 6        # parallel workers for per-patient evaluation
  device: "cpu"         # reserved for future GPU-assisted ops
  # Metrics
  compute_lpips: false  # requires torch + lpips; optional
  ssim_axis: "axial"    # 'axial' | 'coronal' | 'sagittal' slice-wise averaging
  evaluate_train: true  # compute metrics on train set (can disable for speed)
  # Saving
  save_weight_volumes: true    # save per-expert tiled weight maps as compressed NPZ for inspection
  save_blends: true            # save blended predictions
  # Logging
  log_level: "INFO"            # logging level: DEBUG, INFO, WARNING, ERROR
  log_to_file: true            # save logs to file in output directory
  log_region_freq: 10          # log region optimization progress every N regions
  # Output directory
  out_root: /media/mpascual/PortableSSD/Meningiomas/tasks/superresolution/results/PACS_SR

predict:
  pacs_sr_weights_path: "/path/to/saved/pacs_sr/weights.npy"
  experts:
    expert1:
      name: "BSPLINE"
      opinion_path: "/path/to/expert1/predictions"
    expert2:
      name: "ECLARE"
      opinion_path: "/path/to/expert2/predictions"
    expert3:
      name: "SMORE"
      opinion_path: "/path/to/expert3/predictions"
    expert4:
      name: "UNIRES"
      opinion_path: "/path/to/expert4/predictions"
  out_root: "/path/to/pacs_sr/predictions/output"